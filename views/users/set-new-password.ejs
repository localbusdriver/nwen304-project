<!DOCTYPE html>
<html>
<head>
    <title>Set New Password</title>
</head>
<body>
    <form action="/new-password" method="post">
        <input type="hidden" name="passwordToken" value="<%= passwordToken %>">
        <input type="hidden" name="userId" value="<%= userId %>">
        <input type="password" name="password" placeholder="New Password" required oninput="validatePassword()">
        <div id="passwordFeedback"></div>
        <button type="submit">Set New Password</button>
    </form>

    <script>
        function validatePassword() {
            const password = document.querySelector('input[name="password"]').value;
            const feedback = document.getElementById('passwordFeedback');
            
            if (password.length < 8) {
                feedback.textContent = 'Password must be at least 8 characters long.';
                return;
            }
            if (!/[a-z]/.test(password)) {
                feedback.textContent = 'Password must contain at least one lowercase character.';
                return;
            }
            if (!/[A-Z]/.test(password)) {
                feedback.textContent = 'Password must contain at least one uppercase character.';
                return;
            }
            if (!/[0-9]/.test(password)) {
                feedback.textContent = 'Password must contain at least one number.';
                return;
            }
            
            feedback.textContent = 'Password looks good!';
        }
    </script>
</body>
</html>
